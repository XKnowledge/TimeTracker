<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>时光刻录 - 每日时间记录</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body class="min-h-screen grid-bg">
    <!-- 标题栏（用于拖拽窗口） -->
    <div class="title-bar">
        <div class="window-controls">
            <button class="window-btn" onclick="minimizeWindow()" title="最小化">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
            </button>
            <button class="window-btn" onclick="maximizeWindow()" title="最大化">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="4" y="4" width="16" height="16" rx="2"></rect>
                </svg>
            </button>
            <button class="window-btn close" onclick="closeWindow()" title="关闭">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                    <line x1="6" y1="18" x2="18" y2="6"></line>
                </svg>
            </button>
        </div>
    </div>
    <!-- 内容区域 -->
    <div class="content-wrapper">
    <!-- 装饰球体 -->
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>
    <div class="relative z-10 max-w-5xl mx-auto px-4 py-8 md:py-12">
        <!-- 头部 -->
        <header class="mb-8 animate-fade-in" style="animation-delay: 0.1s;">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                <div>
                    <h1 class="font-display text-3xl md:text-4xl font-bold tracking-tight mb-2">
                        时光刻录
                    </h1>
                    <p class="text-[var(--fg-muted)]">记录每一刻，洞察时间的流向</p>
                </div>
                <div class="flex items-center gap-3">
                    <button onclick="goToPrevDay()" class="btn-icon" aria-label="前一天">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M15 18l-6-6 6-6" />
                        </svg>
                    </button>
                    <input type="date" id="datePicker" class="date-picker font-display" onchange="changeDate()">
                    <button onclick="goToNextDay()" class="btn-icon" aria-label="后一天">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M9 18l6-6-6-6" />
                        </svg>
                    </button>
                    <button onclick="goToToday()" class="btn-secondary text-sm ml-2">今天</button>
                    <div class="h-6 w-px bg-[var(--border)] mx-1"></div>
                    <button onclick="exportData()" class="btn-secondary text-sm flex items-center gap-1" title="导出数据">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="17 8 12 3 7 8" />
                            <line x1="12" y1="3" x2="12" y2="15" />
                        </svg>
                        导出
                    </button>
                    <button onclick="importData()" class="btn-secondary text-sm flex items-center gap-1" title="导入数据">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="7 10 12 15 17 10" />
                            <line x1="12" y1="15" x2="12" y2="3" />
                        </svg>
                        导入
                    </button>
                </div>
            </div>
        </header>
        <!-- 开始时间设置 -->
        <div class="stat-card mb-6 animate-fade-in" style="animation-delay: 0.2s;">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                <div>
                    <label class="block text-sm font-medium text-[var(--fg-muted)] mb-1">每日开始时间</label>
                    <div class="flex items-center gap-2">
                        <input type="time" id="startTime" value="08:00" class="date-picker font-display text-lg"
                            onchange="saveStartTime()">
                        <span class="text-sm text-[var(--fg-muted)]">作为时间计算基准点</span>
                    </div>
                </div>
                <div class="flex items-center gap-6">
                    <div class="text-center">
                        <div class="text-2xl font-display font-bold" id="totalEvents">0</div>
                        <div class="text-xs text-[var(--fg-muted)]">事件总数</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-display font-bold" id="importantCount">0</div>
                        <div class="text-xs text-[var(--fg-muted)]">重要事件</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 统计面板 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div class="stat-card animate-fade-in" style="animation-delay: 0.3s;">
                <div class="text-sm text-[var(--fg-muted)] mb-2">总时间跨度</div>
                <div class="text-3xl font-display font-bold" id="totalSpan">0 分钟</div>
                <div class="text-sm text-[var(--fg-muted)] mt-1" id="totalSpanHours"></div>
            </div>
            <div class="stat-card animate-fade-in" style="animation-delay: 0.4s;">
                <div class="text-sm text-[var(--fg-muted)] mb-2">重要事件时长</div>
                <div class="text-3xl font-display font-bold text-[var(--accent)]" id="importantTime">0 分钟</div>
                <div class="text-sm text-[var(--fg-muted)] mt-1" id="importantTimeHours"></div>
            </div>
            <div class="stat-card animate-fade-in" style="animation-delay: 0.5s;">
                <div class="text-sm text-[var(--fg-muted)] mb-2">重要事件占比</div>
                <div class="text-3xl font-display font-bold" id="importantRatio">0%</div>
                <div class="progress-bar mt-3">
                    <div class="progress-fill" id="ratioProgress" style="width: 0%"></div>
                </div>
            </div>
        </div>
        <!-- 表格区域 -->
        <div class="animate-fade-in" style="animation-delay: 0.6s;">
            <div class="flex items-center justify-between mb-4">
                <h2 class="font-display text-xl font-semibold">事件记录</h2>
                <button onclick="addEvent()" class="btn-primary flex items-center gap-2">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    添加事件
                </button>
            </div>
            <div class="table-container" id="tableContainer">
                <table class="time-table w-full" id="eventTable">
                    <thead>
                        <tr>
                            <th style="width: 100px;">重要</th>
                            <th>事件描述</th>
                            <th style="width: 120px;">完成时间</th>
                            <th style="width: 120px;">持续时间</th>
                            <th style="width: 60px;"></th>
                        </tr>
                    </thead>
                    <tbody id="eventBody">
                        <!-- 动态生成 -->
                    </tbody>
                </table>
                <div class="empty-state" id="emptyState">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    <p class="font-medium mb-2">暂无事件记录</p>
                    <p class="text-sm">点击上方"添加事件"开始记录你的一天</p>
                </div>
            </div>
        </div>
        <!-- 底部说明 -->
        <div class="mt-8 text-center text-sm text-[var(--fg-muted)] animate-fade-in" style="animation-delay: 0.7s;">
            <p>提示：事件需按完成时间顺序录入，系统自动计算持续时间与重要事件占比</p>
        </div>
    </div>
    </div>
    <!-- 提示弹窗 -->
    <div class="toast error" id="toast"></div>
    <script src="app.js"></script>
</body>

</html>
